<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <title>Survey</title>
    <!-- Font Awesome Glyphicons-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
    <!-- Referencing Bootstrap so we can utilize their code-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
  
   <script
     src="https://code.jquery.com/jquery-3.3.1.min.js"
     integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
     crossorigin="anonymous"
   ></script>
   <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>

</head>

<body class="bg-light">
    <div class="container">

            <div class="row bg-white">
                <div class="col-lg-12 col-sm-12 col-xs-12 bg-white text-black">
                    <h1>Survey Questions</h1>
                    <hr>

                    <h2><strong>About you</strong></h2>
                    <h3>Name (required)</h3>
                    <input type="text" id="name" class="form-control" required="">
                    <h3>Link to Photo Image (required)</h3>
                    <input type="text" id="photo" class="form-control" required="">
                    <br></br>

                    <h2><strong>Question 1</strong></h2>
                    <h4>You love to be lively?</h4>

                    <select class="chosen-select" id="q1">
                        <option value = ""></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>

                    <br></br>

                    <h2><strong>Question 2</strong></h2>
                    <h4>You love to be tired?</h4>

                    <select class="chosen-select" id="q2">
                        <option value = ""></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>

                    <br></br>

                    <h2><strong>Question 3</strong></h2>
                    <h4>You love to watch tv/movies/netflix?</h4>

                    <select class="chosen-select" id="q3">
                        <option value = ""></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>

                    <br></br>

                    <h2><strong>Question 4</strong></h2>
                    <h4>You love tesla?</h4>

                    <select class="chosen-select" id="q4">
                        <option value = ""></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>

                    <br></br>

                    <h2><strong>Question 5</strong></h2>
                    <h4>You love basketball?</h4>

                    <select class="chosen-select" id="q5">
                        <option value = ""></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>

                    <br></br>

                    <h2><strong>Question 6</strong></h2>
                    <h4>You love the jonas brothers?</h4>

                    <select class="chosen-select" id="q6">
                        <option value = ""></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>

                    <br></br>

                    <h2><strong>Question 7</strong></h2>
                    <h4>You love babysitting?</h4>

                    <select class="chosen-select" id="q7">
                        <option value = ""></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>

                    <br></br>

                    <h2><strong>Question 8</strong></h2>
                    <h4>You love singing?</h4>

                    <select class="chosen-select" id="q8">
                        <option value = ""></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>

                    <br></br>

                    <h2><strong>Question 9</strong></h2>
                    <h4>You love kittens?</h4>

                    <select class="chosen-select" id="q9">
                        <option value = ""></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>

                    <br></br>

                    <h2><strong>Question 10</strong></h2>
                    <h4>You love the chocolate bar 3 Musketeers?</h4>

                    <select class="chosen-select" id="q10">
                        <option value = ""></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>

                    <br></br>
                    
                </div>
                
                <!-- Submit Button -->
                <button type="submit" class="btn btn-primary btn-lg btn-block submit">
                    Submit
                </button>

                    <!-- Modal Dialog Displaying Closest Friend Match -->
                <div id="modal1" class="modal">
                    <div class="modal-content">
                        <h4>Closest Friend Match</h4>
                        <div class="divider"></div>
                        <h5 id="userMatch"></h5>
                        <img id="userMatchImage" class="materialboxed" width="650" src=""/>
                    </div>
    
                </div>
    </div>



<script type="text/javascript">
    // Creating Front-end JavaScript which "POSTS" our form data to our express server
    // On submit jQuery grabs all of the fields then sends a post request to our API
    // API recognizes the route (/api/tables)... and then runs the associated code (found in api-routes.js)
    // In this case the associated code "saves" the data to the friends.js
    
    let userAnswers = [];

    $(".submit").on("click", function(event) {
      event.preventDefault();
  
      // Grabbing the form elements
      let newUser = {
        name: $("#name").val().trim(),
        photo: $("#photo").val().trim(),
        scores: 
        [
         parseInt($("#q1").val().trim()),
         parseInt($("#q2").val().trim()),
         parseInt($("#q3").val().trim()),
         parseInt($("#q4").val().trim()),
         parseInt($("#q5").val().trim()),
         parseInt($("#q6").val().trim()),
         parseInt($("#q7").val().trim()),
         parseInt($("#q8").val().trim()),
         parseInt($("#q9").val().trim()),
         parseInt($("#q10").val().trim())
      ]
      };

      $.post("/api/friends", newUser,function(data){
            // Set the name and image values of friend match
            console.log("Name: ", data.name);
            $('#userMatch').text(data.name);
		    $("#userMatchImage").attr("src", data.matchImage);
            $("#modal1").modal("toggle");
	
    
      })

    });

  
  </script>
  </body>
</html>